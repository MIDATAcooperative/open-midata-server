
	<div ng-controller="VisualizationCtrl">
		
		
		<div ng-cloak class="panel panel-primary">
		  <div class="panel-heading">Market</div>
		  <div class="panel-body">
		    <loader busy="status.isBusy !== false">
			<div class="alert alert-danger alert-dismissable" ng-show="error">
				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				<p>{{error}}</p>
			</div>
			<div class="alert alert-success alert-dismissable" ng-show="success">
				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				<p>You have successfully installed a new plugin. </p>
			</div>
			
			<p class="lead">{{visualization.name}}</p>
			<div class="row">
				<p class="col-xs-2">Created by:</p>
				<p class="col-xs-10">{{visualization.creator}}</p>
			</div>
			<div class="row">
				<p class="col-xs-2">Description:</p>
				<p class="col-xs-10">{{visualization.description}}</p>
			</div>
		
			<div class="row">
			    <p class="col-xs-2">Tile Name:</p>
			    <p class="col-xs-10">			      
			      <input type="text" ng-model="options.spaceName" />			
                </p>			    			        
			</div>
			<div class="row">
			    <p class="col-xs-2">Location:</p>
			    <p class="col-xs-10">			      
			      <input type="text" ng-model="options.context" />			
                </p>			    			        
			</div>
			<div ng-if="options.query" class="row">
			    <p class="col-xs-2"></p>
			    <div class="col-xs-10">
			      <label>
			        <input type="checkbox" ng-model="options.applyRules">
			        Grant this plugin access to: 
			      </label>
			      <div class="alert alert-info">
			      <ul>
			        <li ng-repeat="(rule, params) in options.query">
			          <span ng-if="rule == 'format'">Records that have format:
			            <ul>
			              <li ng-repeat="format in params">{{ format }}</li>
			            </ul> 
			          </span>
			          <span ng-if="rule == 'content'">Records that have content:
			            <ul>
			              <li ng-repeat="content in params">{{ content }}</li>
			            </ul> 
			          </span>
			          <span ng-if="rule == 'group'">Records that belong to group:
			            <ul>
			              <li ng-repeat="group in params">{{ group }}</li>
			            </ul> 
			          </span>
			        </li>
			      </ul>		
			      </div>
                </div>
			</div>
					
			<button type="button" ng-disabled="status.action == 'install'" class="btn btn-primary" ng-click="install()">Add Plugin</button>
			<button type="button" ng-disabled="status.action == 'uninstall'" class="btn btn-default" ng-show="visualization.installed" ng-click="uninstall()">Uninstall Plugin</button>
			</loader>
			</div>
		</div>
	</div>