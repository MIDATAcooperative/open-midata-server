<div ng-controller="MemberAddressCtrl">

	<div class="panel panel-primary">
		<div class="panel-heading" translate="admin_address.title">Member Address</div>
		<div class="body">		    		           
            <loader busy="status.isBusy !== false">              
              <address>
              {{ member.firstname }} {{ member.lastname }}<br>            
			  {{ member.address1 }}<br>
			  {{ member.address2 }}<br>
			  {{ member.zip }} {{ member.city }}<br>
			  {{ member.country }}<br><br>
			  <span translate="common.user.email"></span>: {{ member.email }}<br>
			  <span translate="common.user.phone"></span>: {{ member.phone }}
			  </address>
			  <div class="extraspace">
			    <a class="btn btn-danger btn-xs" translate="admin_address.change_email_btn" ui-sref="^.changeemail({ userId : member._id })"></a>
			  </div>
			  <table class="table table-striped table-bordered">
			  <tr>
			  <td translate="admin_address.midata_id"></td><td>{{ member.midataID }}</td>
			  </tr><tr>
			  <td translate="admin_address.role"></td><td translate="{{ 'enum.userrole.'+ member.role }}"></td>
			  </tr><tr>
			  <td translate="admin_address.subroles"></td><td><div ng-repeat="subrole in member.subroles" translate="{{ 'enum.subuserrole.'+subrole }}"></div></td>
			  </tr><tr ng-show="member.coach">
			  <td translate="registration.coach"></td><td>{{ member.coach }}</td>
			  </tr><tr ng-show="member.reason">
			  <td translate="registration.reason"></td><td>{{ member.reason }}</td>
			  </tr><tr ng-show="member.developer">
			  <td translate="admin_address.developer"></td><td>{{ member.developerName }}</td>
			  </tr><tr>
			  <td translate="admin_address.status"></td><td><select ng-change="changeUser(member);" ng-model="member.status" class="form-control" ng-options="status as 'enum.userstatus.'+status | translate for status in stati"></select></td>
			  </tr><tr>
			  <td translate="admin_address.agb_status"></td><td><select ng-change="changeUser(member);" ng-model="member.agbStatus" class="form-control" ng-options="status as 'enum.contractstatus.'+status | translate for status in contractStati"></select></td>
			  </tr><tr>
			  <td translate="admin_address.contract_status"></td><td><select ng-change="changeUser(member);" ng-model="member.contractStatus" class="form-control" ng-options="status as 'enum.contractstatus.'+status | translate for status in contractStati"></select></td>
			  </tr><tr>
			  <td translate="admin_address.email_status"></td><td><span translate="{{ 'enum.emailstatus.'+member.emailStatus }}"></span>  <button ng-show="member.emailStatus != 'VALIDATED'" ng-click="confirmEmail(member);" class="btn btn-xs btn-danger" translate="admin_address.email_confirm_btn"></button></td>
			  </tr><tr>
			  <td translate="admin_address.confirmation_code"></td><td><b>{{ member.confirmationCode }}</b></td>
			  </tr><tr>
			  <td translate="admin_address.confirmation_date"></td><td>{{ member.confirmedAt | date }}</td>
			  </tr><tr>
			  <td translate="admin_address.registration_date"></td><td>{{ member.registeredAt | date }}</td>
			  </tr><tr>
			  <td translate="admin_address.last_login"></td><td>{{ member.login | date }}</td>
			  </tr>
			  </table>
			  <button ui-sref="^.members" class="btn btn-default" translate="common.back_btn"></button>
			  <button ng-show="member.status == 'DELETED'" class="btn btn-danger" ng-click="wipe()" translate="admin_address.wipe_btn"></button>
			</loader>
		</div>
	</div>
	
	<div class="panel panel-primary">
    <div class="panel-heading">History</div>
    <div class="panel-body">
    <auditlog patient="{{ member._id }}"></auditlog>   
    <form class="form">
      <div class="form-group">
        <label for="comment" translate="admin_address.comment"></label>
        <textarea class="form-control" rows="3" id="comment" ng-model="comment"></textarea>
      </div>  
      <button type="button" class="btn btn-default" ng-click="addComment();" translate="admin_address.add_comment_btn"></button>
    </form>    
    </div>
    </div>
</div>