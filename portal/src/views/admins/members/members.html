<div ng-controller="MembersListCtrl">

	<div class="panel panel-primary">
		<div class="panel-heading">Member List</div>
		<div class="body">
		    <form class="css-form form-horizontal">
		      <formrow myid="search" label="Search">
		        <select class="form-control" id="search" ng-change="reload(search);" ng-model="search" ng-options="search as search.name for search in searches"></select>
		      </formrow>
		      <formrow myid="role" label="Role" ng-show="search.changeable">
		        <select  class="form-control" id="role" ng-change="reload();" ng-model="search.criteria.role" ng-options="role for role in roles"></select>
		      </formrow>
		      <formrow myid="status" label="Status" ng-show="search.changeable">
		        <select  class="form-control" id="status" ng-change="reload();" ng-model="search.criteria.status" ng-options="status for status in stati"></select>
		      </formrow>
		    </form>
		            
            <loader busy="status.isBusy !== false">
			

			<table class="table table-striped">

				<tr>
					<th>midataID</th>
					<th>Firstname</th>
					<th>Lastname</th>
					<th>EMail</th>
					<th>Role</th>
					<th>Status</th>
				</tr>
								
				<tr ng-repeat="member in members">
					<td><a href="javascript:" ui-sref="^.address({ userId : member._id.$oid })">{{ member.midataID || 'none' }}</a></td>
					<td>{{ member.firstname }}</td>
					<td>{{ member.lastname }}</td>
					<td>{{ member.email }}</td>
					<td>{{ member.role }}</td>
					<td><select ng-change="changeUser(member);" ng-model="member.status" class="form-control" ng-options="status for status in stati"></select></td>
				</tr>
			</table>

			
			</loader>
		</div>
	</div>
</div>