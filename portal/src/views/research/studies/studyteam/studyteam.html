<div ng-controller="StudyTeamCtrl" ng-cloak>
	<div class="tab-content">
		<div class="tab-pane active">
			<loader busy="status.isBusy !== false">
			<p ng-show="error && !error.field" translate="{{ error.code || error }}" ng-class="{ 'alert-warning' : error.level == 'warning', 'alert-danger' : !error.level }" class="alert">	   
	        </p>
			<table class="table table-striped">
			    <tr>
			      <th translate="common.user.firstname"></th>
			      <th translate="common.user.lastname"></th>
			      <th translate="common.user.email"></th>
			      <th translate="studyteam.role"></th>
			      <th></th>
			    </tr>
				<tr ng-repeat="member in members|filter:{status:'ACTIVE'}|orderBy:'lastname'">
					<td>{{ member.user.firstname }}</td>
					<td>{{ member.user.lastname }}</td>
					<td>{{ member.user.email }}</td>
					<td>{{ member.role.roleName }}</td>
					<td>
						<button type="button" ng-show="member.member != user._id" ng-click="removePerson(member)" class="close" aria-label="Delete">
							<span aria-hidden="true">&times;</span>
						</button>
					</td>
				</tr>				
			</table>
			
			<form class="form-horizontal">
			  <formrow myid="person" label="studyteam.person">
			    <select name="person" id="person" class="form-control" ng-model="add.person" ng-options="person as person.email for person in persons"></select>
			  </formrow>
			  <formrow myid="roleName" label="studyteam.role">
			    <input type="text" class="form-control" id="roleName" name="roleName" ng-model="add.role.roleName">
			    <!--  <select name="role" id="role" class="form-control" ng-model="add.role" ng-options="role as 'enum.researcherrole.'+role | translate for role in roles"></select>  -->
			  </formrow>
			  <formrow myid="rights" label="studyteam.rights">
			     <div class="checkbox" ng-repeat="req in rights">
		    <label>
		        <input type="checkbox" ng-model="add.role[req]">
		        <span translate="{{ 'studyteam.right.'+req }}"></span>
		    </label>
		 </div>
			  </formrow>
			  <button ng-disabled="status.action == 'add'" ng-click="addPerson()" class="btn btn-primary" translate="studyteam.addperson_btn"></button>
			</form>						

			</loader>
		</div>
	</div>

</div>