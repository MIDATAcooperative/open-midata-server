<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (version 1.7.0_91) on Tue Dec 08 14:41:03 CET 2015 -->
<title>RecordManager</title>
<meta name="date" content="2015-12-08">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RecordManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RecordManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../utils/access/Query.html" title="class in utils.access"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?utils/access/RecordManager.html" target="_top">Frames</a></li>
<li><a href="RecordManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">utils.access</div>
<h2 title="Class RecordManager" class="title">Class RecordManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>utils.access.RecordManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">RecordManager</span>
extends java.lang.Object</pre>
<div class="block">Access to records. Manages authorizations using access permission sets.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#COMPLETE_DATA">COMPLETE_DATA</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#COMPLETE_META">COMPLETE_META</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#FULLAPS">FULLAPS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#FULLAPS_FLAT">FULLAPS_FLAT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#FULLAPS_FLAT_OWNER">FULLAPS_FLAT_OWNER</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#FULLAPS_WITHSTREAMS">FULLAPS_WITHSTREAMS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../utils/access/RecordManager.html" title="class in utils.access">RecordManager</a></code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#instance">instance</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#INTERNALIDONLY">INTERNALIDONLY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#STREAMS_ONLY">STREAMS_ONLY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#STREAMS_ONLY_OWNER">STREAMS_ONLY_OWNER</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../utils/access/RecordManager.html#RecordManager()">RecordManager</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#addDocumentRecord(org.bson.types.ObjectId,%20models.Record,%20java.util.Collection)">addDocumentRecord</a></strong>(org.bson.types.ObjectId&nbsp;owner,
                 <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
                 java.util.Collection&lt;<a href="../../models/Record.html" title="class in models">Record</a>&gt;&nbsp;parts)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#addRecord(org.bson.types.ObjectId,%20models.Record)">addRecord</a></strong>(org.bson.types.ObjectId&nbsp;executingPerson,
         <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record)</code>
<div class="block">add a new record to the database</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#addRecord(org.bson.types.ObjectId,%20models.Record,%20java.io.FileInputStream,%20java.lang.String,%20java.lang.String)">addRecord</a></strong>(org.bson.types.ObjectId&nbsp;executingPerson,
         <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
         java.io.FileInputStream&nbsp;data,
         java.lang.String&nbsp;fileName,
         java.lang.String&nbsp;contentType)</code>
<div class="block">Add a new record containing an attachment to the database</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#addRecord(org.bson.types.ObjectId,%20models.Record,%20org.bson.types.ObjectId)">addRecord</a></strong>(org.bson.types.ObjectId&nbsp;executingPerson,
         <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
         org.bson.types.ObjectId&nbsp;alternateAps)</code>
<div class="block">Add a new record to the database and give access not only to the owner APS but to a second APS
 
 This function is useful if a record needs to be added by another person that does not have 
 access to the record owners APS.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#applyQueries(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20models.Record,%20org.bson.types.ObjectId)">applyQueries</a></strong>(org.bson.types.ObjectId&nbsp;executingPerson,
            org.bson.types.ObjectId&nbsp;userId,
            <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
            org.bson.types.ObjectId&nbsp;useAps)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#applyQuery(org.bson.types.ObjectId,%20java.util.Map,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20boolean)">applyQuery</a></strong>(org.bson.types.ObjectId&nbsp;userId,
          java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;query,
          org.bson.types.ObjectId&nbsp;sourceaps,
          org.bson.types.ObjectId&nbsp;targetaps,
          boolean&nbsp;ownerInformation)</code>
<div class="block">Share stream records from one APS to another by applying a query once.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#clear()">clear</a></strong>()</code>
<div class="block">clears APS cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>org.bson.types.ObjectId</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#createAnonymizedAPS(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId)">createAnonymizedAPS</a></strong>(org.bson.types.ObjectId&nbsp;owner,
                   org.bson.types.ObjectId&nbsp;other,
                   org.bson.types.ObjectId&nbsp;proposedId)</code>
<div class="block">creates an access permission set where the owner and one other person have access</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.bson.types.ObjectId</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#createAPSForRecord(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20byte[],%20boolean)">createAPSForRecord</a></strong>(org.bson.types.ObjectId&nbsp;executingPerson,
                  org.bson.types.ObjectId&nbsp;owner,
                  org.bson.types.ObjectId&nbsp;recordId,
                  byte[]&nbsp;key,
                  boolean&nbsp;direct)</code>
<div class="block">create an APS for a record.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>org.bson.types.ObjectId</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#createPrivateAPS(org.bson.types.ObjectId,%20org.bson.types.ObjectId)">createPrivateAPS</a></strong>(org.bson.types.ObjectId&nbsp;who,
                org.bson.types.ObjectId&nbsp;proposedId)</code>
<div class="block">create a new access permission where only the owner has access</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#deleteAPS(org.bson.types.ObjectId,%20org.bson.types.ObjectId)">deleteAPS</a></strong>(org.bson.types.ObjectId&nbsp;apsId,
         org.bson.types.ObjectId&nbsp;ownerId)</code>
<div class="block">Delete an access permission set</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#deleteRecord(org.bson.types.ObjectId,%20utils.auth.RecordToken)">deleteRecord</a></strong>(org.bson.types.ObjectId&nbsp;executingPerson,
            <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;tk)</code>
<div class="block">Delete a record from the system.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../models/Record.html" title="class in models">Record</a></code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#fetch(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId)">fetch</a></strong>(org.bson.types.ObjectId&nbsp;who,
     org.bson.types.ObjectId&nbsp;aps,
     org.bson.types.ObjectId&nbsp;recordId)</code>
<div class="block">Lookup a single record by providing its id and the APS from where it is accessible</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../models/Record.html" title="class in models">Record</a></code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#fetch(org.bson.types.ObjectId,%20utils.auth.RecordToken)">fetch</a></strong>(org.bson.types.ObjectId&nbsp;who,
     <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;token)</code>
<div class="block">Lookup a single record by providing a RecordToken</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../models/Record.html" title="class in models">Record</a></code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#fetch(org.bson.types.ObjectId,%20utils.auth.RecordToken,%20java.util.Set)">fetch</a></strong>(org.bson.types.ObjectId&nbsp;who,
     <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;token,
     java.util.Set&lt;java.lang.String&gt;&nbsp;fields)</code>
<div class="block">Lookup a single record by providing a RecordToken and return only requested fields</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../utils/db/FileStorage.FileData.html" title="class in utils.db">FileStorage.FileData</a></code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#fetchFile(org.bson.types.ObjectId,%20utils.auth.RecordToken)">fetchFile</a></strong>(org.bson.types.ObjectId&nbsp;who,
         <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;token)</code>
<div class="block">Lookup a single record by providing a RecordToken and return the attachment of the record</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.bson.BSONObject</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#getMeta(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.lang.String)">getMeta</a></strong>(org.bson.types.ObjectId&nbsp;who,
       org.bson.types.ObjectId&nbsp;apsId,
       java.lang.String&nbsp;key)</code>
<div class="block">read a meta data object from an APS</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../models/RecordsInfo.html" title="class in models">RecordsInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#info(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Map,%20models.enums.AggregationType)">info</a></strong>(org.bson.types.ObjectId&nbsp;who,
    org.bson.types.ObjectId&nbsp;aps,
    java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;properties,
    <a href="../../models/enums/AggregationType.html" title="enum in models.enums">AggregationType</a>&nbsp;aggrType)</code>
<div class="block">computes a summary of records</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../models/Record.html" title="class in models">Record</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#list(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Map,%20java.util.Set)">list</a></strong>(org.bson.types.ObjectId&nbsp;who,
    org.bson.types.ObjectId&nbsp;apsId,
    java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;properties,
    java.util.Set&lt;java.lang.String&gt;&nbsp;fields)</code>
<div class="block">Query for records matching some criteria.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#listRecordIds(org.bson.types.ObjectId,%20org.bson.types.ObjectId)">listRecordIds</a></strong>(org.bson.types.ObjectId&nbsp;who,
             org.bson.types.ObjectId&nbsp;apsId)</code>
<div class="block">Return a set with all record ids accessible from an APS</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#listRecordIds(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Map)">listRecordIds</a></strong>(org.bson.types.ObjectId&nbsp;who,
             org.bson.types.ObjectId&nbsp;apsId,
             java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;properties)</code>
<div class="block">Return a set with all record ids of records matching some criteria accessible from an APS</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#resetInfo(org.bson.types.ObjectId)">resetInfo</a></strong>(org.bson.types.ObjectId&nbsp;who)</code>
<div class="block">for debugging only: remove all "info" objects from all APSs so that they are recomputed next time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#setMeta(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.lang.String,%20java.util.Map)">setMeta</a></strong>(org.bson.types.ObjectId&nbsp;who,
       org.bson.types.ObjectId&nbsp;apsId,
       java.lang.String&nbsp;key,
       java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;data)</code>
<div class="block">store a meta data object into an APS</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#share(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Set,%20boolean)">share</a></strong>(org.bson.types.ObjectId&nbsp;who,
     org.bson.types.ObjectId&nbsp;fromAPS,
     org.bson.types.ObjectId&nbsp;toAPS,
     java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;records,
     boolean&nbsp;withOwnerInformation)</code>
<div class="block">share records contained in an APS to another APS</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#shareAPS(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20byte[])">shareAPS</a></strong>(org.bson.types.ObjectId&nbsp;apsId,
        org.bson.types.ObjectId&nbsp;ownerId,
        org.bson.types.ObjectId&nbsp;targetId,
        byte[]&nbsp;publickey)</code>
<div class="block">share access permission set content with another entity that has a public key</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#shareAPS(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Set)">shareAPS</a></strong>(org.bson.types.ObjectId&nbsp;apsId,
        org.bson.types.ObjectId&nbsp;ownerId,
        java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;targetUsers)</code>
<div class="block">share access permission set content with other users</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#shareByQuery(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Map)">shareByQuery</a></strong>(org.bson.types.ObjectId&nbsp;who,
            org.bson.types.ObjectId&nbsp;fromAPS,
            org.bson.types.ObjectId&nbsp;toAPS,
            java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;query)</code>
<div class="block">set a query that dynamically shares records from one APS to another APS.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#unshare(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Set)">unshare</a></strong>(org.bson.types.ObjectId&nbsp;who,
       org.bson.types.ObjectId&nbsp;apsId,
       java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;records)</code>
<div class="block">remove records from an APS</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../utils/access/RecordManager.html#unshareAPS(org.bson.types.ObjectId,%20org.bson.types.ObjectId,%20java.util.Set)">unshareAPS</a></strong>(org.bson.types.ObjectId&nbsp;apsId,
          org.bson.types.ObjectId&nbsp;ownerId,
          java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;targetUsers)</code>
<div class="block">remove access permissions of given users from an APS</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="instance">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>instance</h4>
<pre>public static&nbsp;<a href="../../utils/access/RecordManager.html" title="class in utils.access">RecordManager</a> instance</pre>
</li>
</ul>
<a name="FULLAPS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FULLAPS</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt; FULLAPS</pre>
</li>
</ul>
<a name="FULLAPS_WITHSTREAMS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FULLAPS_WITHSTREAMS</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt; FULLAPS_WITHSTREAMS</pre>
</li>
</ul>
<a name="FULLAPS_FLAT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FULLAPS_FLAT</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt; FULLAPS_FLAT</pre>
</li>
</ul>
<a name="FULLAPS_FLAT_OWNER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FULLAPS_FLAT_OWNER</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt; FULLAPS_FLAT_OWNER</pre>
</li>
</ul>
<a name="INTERNALIDONLY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INTERNALIDONLY</h4>
<pre>public static final&nbsp;java.util.Set&lt;java.lang.String&gt; INTERNALIDONLY</pre>
</li>
</ul>
<a name="COMPLETE_META">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COMPLETE_META</h4>
<pre>public static final&nbsp;java.util.Set&lt;java.lang.String&gt; COMPLETE_META</pre>
</li>
</ul>
<a name="COMPLETE_DATA">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COMPLETE_DATA</h4>
<pre>public static final&nbsp;java.util.Set&lt;java.lang.String&gt; COMPLETE_DATA</pre>
</li>
</ul>
<a name="STREAMS_ONLY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STREAMS_ONLY</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt; STREAMS_ONLY</pre>
</li>
</ul>
<a name="STREAMS_ONLY_OWNER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>STREAMS_ONLY_OWNER</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt; STREAMS_ONLY_OWNER</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RecordManager()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RecordManager</h4>
<pre>public&nbsp;RecordManager()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block">clears APS cache. Is automatically called after each request.</div>
</li>
</ul>
<a name="createPrivateAPS(org.bson.types.ObjectId, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPrivateAPS</h4>
<pre>public&nbsp;org.bson.types.ObjectId&nbsp;createPrivateAPS(org.bson.types.ObjectId&nbsp;who,
                                       org.bson.types.ObjectId&nbsp;proposedId)
                                         throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">create a new access permission where only the owner has access</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - ID of APS owner</dd><dd><code>proposedId</code> - ID of APS to be created</dd>
<dt><span class="strong">Returns:</span></dt><dd>ID of APS</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="createAnonymizedAPS(org.bson.types.ObjectId, org.bson.types.ObjectId, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAnonymizedAPS</h4>
<pre>public&nbsp;org.bson.types.ObjectId&nbsp;createAnonymizedAPS(org.bson.types.ObjectId&nbsp;owner,
                                          org.bson.types.ObjectId&nbsp;other,
                                          org.bson.types.ObjectId&nbsp;proposedId)
                                            throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">creates an access permission set where the owner and one other person have access</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>owner</code> - ID of APS owner</dd><dd><code>other</code> - ID of other person</dd><dd><code>proposedId</code> - ID of APS to be created</dd>
<dt><span class="strong">Returns:</span></dt><dd>ID of APS</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="createAPSForRecord(org.bson.types.ObjectId, org.bson.types.ObjectId, org.bson.types.ObjectId, byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAPSForRecord</h4>
<pre>public&nbsp;org.bson.types.ObjectId&nbsp;createAPSForRecord(org.bson.types.ObjectId&nbsp;executingPerson,
                                         org.bson.types.ObjectId&nbsp;owner,
                                         org.bson.types.ObjectId&nbsp;recordId,
                                         byte[]&nbsp;key,
                                         boolean&nbsp;direct)
                                           throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">create an APS for a record.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executingPerson</code> - ID of person who does this request</dd><dd><code>owner</code> - ID of owner of future APS</dd><dd><code>recordId</code> - ID of record</dd><dd><code>key</code> - key this record is encrypted with</dd><dd><code>direct</code> - true for an access permission set which encrypts all records with the APS key</dd>
<dt><span class="strong">Returns:</span></dt><dd>ID of APS</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/InternalServerException.html" title="class in utils.exceptions">InternalServerException</a></code></dd>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="shareAPS(org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shareAPS</h4>
<pre>public&nbsp;void&nbsp;shareAPS(org.bson.types.ObjectId&nbsp;apsId,
            org.bson.types.ObjectId&nbsp;ownerId,
            java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;targetUsers)
              throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">share access permission set content with other users</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>apsId</code> - ID of APS</dd><dd><code>ownerId</code> - ID of owner of APS</dd><dd><code>targetUsers</code> - IDs of user to share APS with</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="shareAPS(org.bson.types.ObjectId, org.bson.types.ObjectId, org.bson.types.ObjectId, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shareAPS</h4>
<pre>public&nbsp;void&nbsp;shareAPS(org.bson.types.ObjectId&nbsp;apsId,
            org.bson.types.ObjectId&nbsp;ownerId,
            org.bson.types.ObjectId&nbsp;targetId,
            byte[]&nbsp;publickey)
              throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">share access permission set content with another entity that has a public key</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>apsId</code> - ID of APS</dd><dd><code>ownerId</code> - ID of owner of APS</dd><dd><code>targetId</code> - ID of target entity</dd><dd><code>publickey</code> - public key of target entity</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="unshareAPS(org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unshareAPS</h4>
<pre>public&nbsp;void&nbsp;unshareAPS(org.bson.types.ObjectId&nbsp;apsId,
              org.bson.types.ObjectId&nbsp;ownerId,
              java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;targetUsers)
                throws <a href="../../utils/exceptions/InternalServerException.html" title="class in utils.exceptions">InternalServerException</a></pre>
<div class="block">remove access permissions of given users from an APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>apsId</code> - ID of APS</dd><dd><code>ownerId</code> - ID of APS owner</dd><dd><code>targetUsers</code> - set of IDs of target users</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/InternalServerException.html" title="class in utils.exceptions">InternalServerException</a></code></dd></dl>
</li>
</ul>
<a name="share(org.bson.types.ObjectId, org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Set, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>share</h4>
<pre>public&nbsp;void&nbsp;share(org.bson.types.ObjectId&nbsp;who,
         org.bson.types.ObjectId&nbsp;fromAPS,
         org.bson.types.ObjectId&nbsp;toAPS,
         java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;records,
         boolean&nbsp;withOwnerInformation)
           throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">share records contained in an APS to another APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - ID of executing person</dd><dd><code>fromAPS</code> - ID of source APS</dd><dd><code>toAPS</code> - ID of target APS</dd><dd><code>records</code> - set of record IDs or null for complete APS</dd><dd><code>withOwnerInformation</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="shareByQuery(org.bson.types.ObjectId, org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shareByQuery</h4>
<pre>public&nbsp;void&nbsp;shareByQuery(org.bson.types.ObjectId&nbsp;who,
                org.bson.types.ObjectId&nbsp;fromAPS,
                org.bson.types.ObjectId&nbsp;toAPS,
                java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;query)
                  throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">set a query that dynamically shares records from one APS to another APS.
  
 this operation will only work if all accessors of the target APS also have access to the source APS
 so this is only useful for APS of spaces</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of user who must be owner and executing person</dd><dd><code>fromAPS</code> - id of APS to share records from</dd><dd><code>toAPS</code> - id of APS to share records into</dd><dd><code>query</code> - the query to be applied to the records</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="unshare(org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unshare</h4>
<pre>public&nbsp;void&nbsp;unshare(org.bson.types.ObjectId&nbsp;who,
           org.bson.types.ObjectId&nbsp;apsId,
           java.util.Set&lt;org.bson.types.ObjectId&gt;&nbsp;records)
             throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">remove records from an APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>apsId</code> - id of target APS</dd><dd><code>records</code> - set of record ids to remove from APS</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="getMeta(org.bson.types.ObjectId, org.bson.types.ObjectId, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMeta</h4>
<pre>public&nbsp;org.bson.BSONObject&nbsp;getMeta(org.bson.types.ObjectId&nbsp;who,
                          org.bson.types.ObjectId&nbsp;apsId,
                          java.lang.String&nbsp;key)
                            throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">read a meta data object from an APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>apsId</code> - id of APS to read from</dd><dd><code>key</code> - unique name of meta data object</dd>
<dt><span class="strong">Returns:</span></dt><dd></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="setMeta(org.bson.types.ObjectId, org.bson.types.ObjectId, java.lang.String, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMeta</h4>
<pre>public&nbsp;void&nbsp;setMeta(org.bson.types.ObjectId&nbsp;who,
           org.bson.types.ObjectId&nbsp;apsId,
           java.lang.String&nbsp;key,
           java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;data)
             throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">store a meta data object into an APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>apsId</code> - id of APS to save into</dd><dd><code>key</code> - unique name of meta data object</dd><dd><code>data</code> - key,value map containing the data to be stored</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="addDocumentRecord(org.bson.types.ObjectId, models.Record, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addDocumentRecord</h4>
<pre>public&nbsp;void&nbsp;addDocumentRecord(org.bson.types.ObjectId&nbsp;owner,
                     <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
                     java.util.Collection&lt;<a href="../../models/Record.html" title="class in models">Record</a>&gt;&nbsp;parts)
                       throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="addRecord(org.bson.types.ObjectId, models.Record)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre>public&nbsp;void&nbsp;addRecord(org.bson.types.ObjectId&nbsp;executingPerson,
             <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record)
               throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">add a new record to the database</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executingPerson</code> - id of executing person</dd><dd><code>record</code> - the record to be saved</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="addRecord(org.bson.types.ObjectId, models.Record, java.io.FileInputStream, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre>public&nbsp;void&nbsp;addRecord(org.bson.types.ObjectId&nbsp;executingPerson,
             <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
             java.io.FileInputStream&nbsp;data,
             java.lang.String&nbsp;fileName,
             java.lang.String&nbsp;contentType)
               throws <a href="../../utils/db/DatabaseException.html" title="class in utils.db">DatabaseException</a>,
                      <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Add a new record containing an attachment to the database</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executingPerson</code> - id of executing person</dd><dd><code>record</code> - the record to be saved</dd><dd><code>data</code> - a file input stream containing the file to be stored as attachment</dd><dd><code>fileName</code> - the name of the attached file</dd><dd><code>contentType</code> - the mime type of the attached file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/db/DatabaseException.html" title="class in utils.db">DatabaseException</a></code></dd>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="addRecord(org.bson.types.ObjectId, models.Record, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre>public&nbsp;void&nbsp;addRecord(org.bson.types.ObjectId&nbsp;executingPerson,
             <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
             org.bson.types.ObjectId&nbsp;alternateAps)
               throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Add a new record to the database and give access not only to the owner APS but to a second APS
 
 This function is useful if a record needs to be added by another person that does not have 
 access to the record owners APS. By adding the record to a second APS that the adding person has access
 to it is guaranteed that the executing person does not loose access to the new record.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executingPerson</code> - id of executing person</dd><dd><code>record</code> - the record to be added</dd><dd><code>alternateAps</code> - an APS where the executing person has access to. (a consent APS for example)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="deleteRecord(org.bson.types.ObjectId, utils.auth.RecordToken)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteRecord</h4>
<pre>public&nbsp;void&nbsp;deleteRecord(org.bson.types.ObjectId&nbsp;executingPerson,
                <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;tk)
                  throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Delete a record from the system. Currently only used for debugging purposes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executingPerson</code> - id of executing person</dd><dd><code>tk</code> - a token for the record to be deleted.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="applyQuery(org.bson.types.ObjectId, java.util.Map, org.bson.types.ObjectId, org.bson.types.ObjectId, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyQuery</h4>
<pre>public&nbsp;void&nbsp;applyQuery(org.bson.types.ObjectId&nbsp;userId,
              java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;query,
              org.bson.types.ObjectId&nbsp;sourceaps,
              org.bson.types.ObjectId&nbsp;targetaps,
              boolean&nbsp;ownerInformation)
                throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Share stream records from one APS to another by applying a query once.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userId</code> - id of executing user</dd><dd><code>query</code> - to query to be applied</dd><dd><code>sourceaps</code> - the source APS id</dd><dd><code>targetaps</code> - the target APS id</dd><dd><code>ownerInformation</code> - include owner information?</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="applyQueries(org.bson.types.ObjectId, org.bson.types.ObjectId, models.Record, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyQueries</h4>
<pre>public&nbsp;void&nbsp;applyQueries(org.bson.types.ObjectId&nbsp;executingPerson,
                org.bson.types.ObjectId&nbsp;userId,
                <a href="../../models/Record.html" title="class in models">Record</a>&nbsp;record,
                org.bson.types.ObjectId&nbsp;useAps)
                  throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="deleteAPS(org.bson.types.ObjectId, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteAPS</h4>
<pre>public&nbsp;void&nbsp;deleteAPS(org.bson.types.ObjectId&nbsp;apsId,
             org.bson.types.ObjectId&nbsp;ownerId)
               throws <a href="../../utils/exceptions/InternalServerException.html" title="class in utils.exceptions">InternalServerException</a></pre>
<div class="block">Delete an access permission set</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>apsId</code> - id of APS</dd><dd><code>ownerId</code> - id of owner of APS</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/InternalServerException.html" title="class in utils.exceptions">InternalServerException</a></code></dd></dl>
</li>
</ul>
<a name="list(org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Map, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>list</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../models/Record.html" title="class in models">Record</a>&gt;&nbsp;list(org.bson.types.ObjectId&nbsp;who,
                          org.bson.types.ObjectId&nbsp;apsId,
                          java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;properties,
                          java.util.Set&lt;java.lang.String&gt;&nbsp;fields)
                            throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Query for records matching some criteria.
 In the result list only those fields of the record need to be filled out that have been requested.
 Additional fields may be set if they were needed to processing the query.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>apsId</code> - id of APS to access</dd><dd><code>properties</code> - key,value map containing the restrictions</dd><dd><code>fields</code> - set of fields to return from the query</dd>
<dt><span class="strong">Returns:</span></dt><dd>list of records matching properties</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="info(org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Map, models.enums.AggregationType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>info</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../models/RecordsInfo.html" title="class in models">RecordsInfo</a>&gt;&nbsp;info(org.bson.types.ObjectId&nbsp;who,
                                     org.bson.types.ObjectId&nbsp;aps,
                                     java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;properties,
                                     <a href="../../models/enums/AggregationType.html" title="enum in models.enums">AggregationType</a>&nbsp;aggrType)
                                       throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">computes a summary of records</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>aps</code> - id of APS to access</dd><dd><code>properties</code> - key,value map containing restrictions</dd><dd><code>aggrType</code> - level of aggreagtion</dd>
<dt><span class="strong">Returns:</span></dt><dd>list of RecordsInfo objects containing a summary of the records</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="fetch(org.bson.types.ObjectId, utils.auth.RecordToken)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetch</h4>
<pre>public&nbsp;<a href="../../models/Record.html" title="class in models">Record</a>&nbsp;fetch(org.bson.types.ObjectId&nbsp;who,
           <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;token)
             throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Lookup a single record by providing a RecordToken</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>token</code> - token with id of record to return</dd>
<dt><span class="strong">Returns:</span></dt><dd>the complete record (no attachment)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="fetchFile(org.bson.types.ObjectId, utils.auth.RecordToken)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchFile</h4>
<pre>public&nbsp;<a href="../../utils/db/FileStorage.FileData.html" title="class in utils.db">FileStorage.FileData</a>&nbsp;fetchFile(org.bson.types.ObjectId&nbsp;who,
                             <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;token)
                               throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Lookup a single record by providing a RecordToken and return the attachment of the record</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>token</code> - token with the id of the record</dd>
<dt><span class="strong">Returns:</span></dt><dd>the attachment content</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="fetch(org.bson.types.ObjectId, utils.auth.RecordToken, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetch</h4>
<pre>public&nbsp;<a href="../../models/Record.html" title="class in models">Record</a>&nbsp;fetch(org.bson.types.ObjectId&nbsp;who,
           <a href="../../utils/auth/RecordToken.html" title="class in utils.auth">RecordToken</a>&nbsp;token,
           java.util.Set&lt;java.lang.String&gt;&nbsp;fields)
             throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Lookup a single record by providing a RecordToken and return only requested fields</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>token</code> - token with the id of the record</dd><dd><code>fields</code> - set of field names that are required</dd>
<dt><span class="strong">Returns:</span></dt><dd>the record to be returned</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="fetch(org.bson.types.ObjectId, org.bson.types.ObjectId, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetch</h4>
<pre>public&nbsp;<a href="../../models/Record.html" title="class in models">Record</a>&nbsp;fetch(org.bson.types.ObjectId&nbsp;who,
           org.bson.types.ObjectId&nbsp;aps,
           org.bson.types.ObjectId&nbsp;recordId)
             throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Lookup a single record by providing its id and the APS from where it is accessible</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>aps</code> - id of APS</dd><dd><code>recordId</code> - id of record</dd>
<dt><span class="strong">Returns:</span></dt><dd>the record to be returned</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="listRecordIds(org.bson.types.ObjectId, org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listRecordIds</h4>
<pre>public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;listRecordIds(org.bson.types.ObjectId&nbsp;who,
                                            org.bson.types.ObjectId&nbsp;apsId)
                                              throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Return a set with all record ids accessible from an APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>apsId</code> - id of APS to search</dd>
<dt><span class="strong">Returns:</span></dt><dd>set with record ids as strings</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="listRecordIds(org.bson.types.ObjectId, org.bson.types.ObjectId, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listRecordIds</h4>
<pre>public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;listRecordIds(org.bson.types.ObjectId&nbsp;who,
                                            org.bson.types.ObjectId&nbsp;apsId,
                                            java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;properties)
                                              throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">Return a set with all record ids of records matching some criteria accessible from an APS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - id of executing person</dd><dd><code>apsId</code> - id of APS to search</dd><dd><code>properties</code> - key,value map containing query</dd>
<dt><span class="strong">Returns:</span></dt><dd>set with record ids as strings</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
<a name="resetInfo(org.bson.types.ObjectId)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>resetInfo</h4>
<pre>public&nbsp;void&nbsp;resetInfo(org.bson.types.ObjectId&nbsp;who)
               throws <a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></pre>
<div class="block">for debugging only: remove all "info" objects from all APSs so that they are recomputed next time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>who</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../utils/exceptions/AppException.html" title="class in utils.exceptions">AppException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RecordManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../utils/access/Query.html" title="class in utils.access"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?utils/access/RecordManager.html" target="_top">Frames</a></li>
<li><a href="RecordManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
