@main("News") {
	<div ng-app="news" ng-controller="NewsCtrl">
		<div class="page-header">
			<h1>News</h1>
		</div>
		
		<div class="alert alert-danger alert-dismissable" ng-show="error">
			<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
			<p>{{error}}</p>
		</div>
		
		<!-- Records jumbotron -->
		<div class="jumbotron" ng-show="!loadingRecords && (pushed.length || shared.length)">
			<button type="button" class="close" aria-hidden="true" ng-click="markAsSeen()">&times;</button>
			<h1>What's new?</h1>
			<div ng-show="pushed.length">
				<p>
					{{pushed.length}} new record<span ng-show="pushed.length > 1">s</span>
					<span ng-show="pushed.length === 1">has</span>
					<span ng-show="pushed.length > 1">have</span>
					been pushed to your account.
				</p>
				<p>
					<button rel="tooltip" type="button" class="btn btn-primary btn-lg" data-toggle="tooltip" title="Which records?" ng-click="recordsPushed()">
						<span class="glyphicon glyphicon-file"></span>
					</button>
					<button rel="tooltip" type="button" class="btn btn-primary btn-lg" data-toggle="tooltip" title="By which apps?" ng-click="appsPushed()">
						<span class="glyphicon glyphicon-camera"></span>
					</button>
				</p>
				<div class="well" ng-show="pushs.show">
					<button type="button" class="close" aria-hidden="true" ng-click="close('pushs')">&times;</button>
					<p>Click on a criterion below to see the respective selection of records.</p>
					<ul>
						<li ng-repeat="criterion in pushs.details"><a ng-click="select(criterion)">{{criterion.name}}</a></li>
					</ul>
				</div>
			</div>
			<div ng-show="shared.length">
				<p>
					{{shared.length}} record<span ng-show="shared.length > 1">s</span>
					<span ng-show="shared.length === 1">has</span>
					<span ng-show="shared.length > 1">have</span>
					been shared with you.
				</p>
				<p>
					<button rel="tooltip" type="button" class="btn btn-primary btn-lg" data-toggle="tooltip" title="Which records?" ng-click="recordsShared()">
						<span class="glyphicon glyphicon-file"></span>
					</button>
					<button rel="tooltip" type="button" class="btn btn-primary btn-lg" data-toggle="tooltip" title="By whom?" ng-click="usersShared()">
						<span class="glyphicon glyphicon-user"></span>
					</button>
				</p>
				<div class="well" ng-show="shares.show">
					<button type="button" class="close" aria-hidden="true" ng-click="close('shares')">&times;</button>
					<p>Click on a criterion below to see the respective selection of records.</p>
					<ul>
						<li ng-repeat="criterion in shares.details"><a ng-click="select(criterion)">{{criterion.name}}</a></li>
					</ul>
				</div>
			</div>
		</div>
		
		<!-- News -->
		<p ng-show="loadingNews">Loading news...</p>
		<div ng-hide="loadingNews">
			<p ng-hide="news.length">There are no news.</p>
			<div class="panel panel-primary" ng-repeat="newsId in news" ng-show="news.length">
				<div class="panel-heading">
					{{newsItems[newsId.$oid].title}}
					<button type="button" class="close" aria-hidden="true" ng-click="hide(newsId)">&times;</button>
				</div>
				<div class="panel-body" style="white-space: pre-line;">{{newsItems[newsId.$oid].content}}</div>
			</div>
		</div>
	</div>
	
	<!-- Load news controller -->
	<script type="text/javascript" src="@routes.Assets.at("javascripts/news.js")"></script>
}
