@import views.html.help.formrow
@import views.html.help.formerror
@import views.html.details.flexiblerecords
@import views.html.details.record
@providermain("Member Details") {
<div ng-app="search" ng-controller="MemberDetailsCtrl" ng-cloak> 
    <div class="page-header"> 
	<h1>Member Details</h1>
	</div>
	<div class="panel panel-primary">
	<div class="panel-heading">{{ member.firstname }} {{ member.sirname }}</div>
	<div class="panel-body">
	<p ng-show="error && !error.field" ng-class="{ 'alert-warning' : error.level == 'warning', 'alert-danger' : !error.level }" class="alert">
	   {{ error.message || error }}
	</p>
	 <address>	
	  <strong>{{ member.firstname }} {{ member.sirname }}</strong><br>
	{{ member.address1 }}<br>
	{{ member.address2 }}<br>
	{{ member.zip }} {{ member.city }}<br>
	{{ member.country }}<br>
	  <span ng-show="member.phone">Phone: {{ member.phone }}</span><br>
	  <span ng-show="member.mobile">Mobile: {{ member.mobile }}</span><br>
	  <span ng-show="member.ssn">SSN: {{ member.ssn }}</span><br>
	  <span ng-show="member.email">Email: {{ member.email }}</span><br>
    </address>	
    </div>
    </div>
    
    <div ng-controller="FlexibleRecordListCtrl" viewid="1" title="Records of this patient:" class="panel panel-primary">
	    <div class="panel-heading">{{ title }}</div>
	    @flexiblerecords()
	</div>
    
    
               <div class="btn-group" ng-show="!loadingApps && apps.length > 0">
					<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
						<span class="glyphicon glyphicon-plus"></span> Create or import a new record
					</button>
					<ul class="dropdown-menu" role="menu">
						<li ng-repeat="app in apps">
							<a href="javascript:;" ng-click="createOrImport(app)">{{app.name}}</a>
						</li>
					</ul>
			   </div>
			   
			    <div class="btn-group" ng-show="!loadingVisualizations && visualizations.length > 0">
					<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
						<span class="glyphicon glyphicon-plus"></span> Use a visualization
					</button>
					<ul class="dropdown-menu" role="menu">
						<li ng-repeat="visualization in visualizations">
							<a href="javascript:;" ng-click="useVisualization(visualization)">{{visualization.name}}</a>
						</li>
					</ul>
			   </div>
    <a href="@routes.ProviderFrontend.search()" class="btn btn-default">Back</a>
    
    <!-- Record modal -->
    <div ng-controller="RecordDetailCtrl" viewid="record" title="Record Details">
      <modal title="Record Details" viewid="record">
	      @record()
	  </modal>	          
	</div>
            
</div>
<script type="text/javascript" src="@routes.Assets.at("javascripts/views.js")" defer></script>
<script type="text/javascript" src="@routes.Assets.at("javascripts/providers/search.js")" defer></script>
	
}