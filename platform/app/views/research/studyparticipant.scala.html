@import views.html.help.formrow
@import views.html.help.formerror
@import views.html.details.flexiblerecords
@import views.html.details.record
@researchmain("Study Participant") {
<div ng-app="studies" ng-controller="ParticipantCtrl" ng-cloak>
   @studynav("Study Participant","../")
	<h1>Study Participant</h1>
	<p ng-show="error && !error.field" ng-class="{ 'alert-warning' : error.level == 'warning', 'alert-danger' : !error.level }" class="alert">
	   {{ error.message || error }}
	</p>
	<div>
	Participant: {{ participation.memberName }}<br>
	Gender: {{ participation.gender }}<br>
	Year of Birth: {{ participation.yearOfBirth }}<br>
	Country: {{ participation.country }}<br>
	</div>
	<div ng-show="member">
	<address>	
	  <strong>{{ member.firstname }} {{ member.sirname }}</strong><br>
	{{ member.address1 }}<br>
	{{ member.address2 }}<br>
	{{ member.zip }} {{ member.city }}<br>
	{{ member.country }}<br>
	  <span ng-show="member.phone">Phone: {{ member.phone }}</span><br>
	  <span ng-show="member.mobile">Mobile: {{ member.mobile }}</span><br>
    </address>		
    </div>
    <p>Status: {{ participation.status }}</p>
    <p>Group: {{ participation.group }}</p>	
    <div ng-show="participation.history.length">
	    <h2>Participation History</h2>
	    <table class="table">
	      <thead>
	        <tr>
	          <th>Event</th>
	          <th>Who</th>
	          <th>When</th>
	          <th>Comment</th>
	        </tr>
	      </thead>
	      <tbody>
	        <tr ng-repeat="entry in participation.history">
	          <td>{{ entry.event }}</td>
	          <td>{{ entry.whoName }}</td>
	          <td>{{ entry.timestamp | date }}</td>
	          <td>{{ entry.message }}</td>
	        </tr>
	      </tbody>
	    </table>
    </div>
    
    <div ng-controller="FlexibleRecordListCtrl" viewid="1" title="Records of this participant">
	    <h2>Shared records:</h2>
	    @flexiblerecords()
	</div>
	
	<!-- Record modal -->
    <div ng-controller="RecordDetailCtrl" viewid="record" title="Record Details">
      <modal title="Record Details" viewid="record">
	      @record()
	  </modal>	          
	</div>
    
    <a href="../participants" class="btn btn-default">Back</a>
</div>
<script type="text/javascript" src="@routes.Assets.at("javascripts/views.js")" defer></script>
<script type="text/javascript" src="@routes.Assets.at("javascripts/research/studies.js")" defer></script>
	
}