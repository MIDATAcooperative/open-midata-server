# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Test

GET     /test                                            controllers.Application.test()
GET     /test2                                           controllers.Application.test2()
GET     /debug/aps/:id                                   controllers.Debug.get(id: String)

# Home page

GET     /logout                                          controllers.Application.logout()

POST    /members/api/registration                        controllers.Application.register()
POST    /members/api/login                               controllers.Application.authenticate()


POST    /common/api/password/lost                        controllers.Application.requestPasswordResetToken()
POST    /common/api/password/set                         controllers.Application.setPasswordWithToken()


POST    /members/api/news                                controllers.News.add()
POST    /members/api/news/get                            controllers.News.get()
PUT     /members/api/news/:id                            controllers.News.hide(id: String)
DELETE  /members/api/news/:id                            controllers.News.delete(id: String)


POST    /shared/api/messages/get                         controllers.Messages.get()
POST    /shared/api/messages/send                        controllers.Messages.send()
DELETE  /shared/api/messages/:id                         controllers.Messages.delete(id: String)
DELETE  /shared/api/messages/:id/trash                   controllers.Messages.remove(id: String)
PUT     /shared/api/messages/:id/:from/:to               controllers.Messages.move(id: String, from: String, to: String)
# Records

POST    /members/api/records/get                         controllers.Records.get()
POST    /members/api/records/delete                      controllers.Records.delete()
POST    /members/api/records/list                        controllers.Records.getRecords()
POST    /members/api/records/info                        controllers.Records.getInfo()
GET     /members/api/records/:id/view                    controllers.Records.getRecordUrl(id: String)
GET     /members/api/records/shared/:apsId               controllers.Records.getSharingDetails(apsId: String)
GET     /records/redirect/:appId                         controllers.Records.onAuthorized(appId: String)
GET     /members/api/records/search/:query               controllers.Records.search(query: String)
POST    /members/api/records/shared                      controllers.Records.updateSharing()
POST    /members/api/records/share                       controllers.Records.share()

GET     /records/:id/file                                controllers.Records.getFile(id: String)

# Spaces
POST    /members/api/spaces                              controllers.Spaces.add()
POST    /members/api/spaces/get                          controllers.Spaces.get()
POST    /members/api/spaces/preview                      controllers.Spaces.getPreviewUrlFromSetup()
DELETE  /members/api/spaces/:id                          controllers.Spaces.delete(id: String)
POST    /members/api/spaces/:id/records                  controllers.Spaces.addRecords(id: String)
GET     /members/api/spaces/:id/token                    controllers.Spaces.getToken(id: String)
GET     /members/api/spaces/:id/url                      controllers.Spaces.getUrl(id: String)
GET     /members/api/spaces/:id/preview                  controllers.Spaces.getPreviewUrl(id: String)


# Circles
POST    /members/api/circles                             controllers.Circles.add()
POST    /members/api/circles/get                         controllers.Circles.get()
POST    /members/api/circles/join                        controllers.Circles.joinByPasscode()
POST    /members/api/consents                            controllers.Circles.listConsents()

DELETE  /members/api/circles/:id                         controllers.Circles.delete(id: String)
POST    /members/api/circles/:id/users                   controllers.Circles.addUsers(id: String)

DELETE  /members/api/circles/:id/users/:userId           controllers.Circles.removeMember(id: String, userId: String)
# Market


POST    /developers/api/plugins                          controllers.Market.registerPlugin()
PUT     /developers/api/plugins/:appId                   controllers.Market.updatePlugin(appId: String)
# Search
GET     /members/api/search/run/:query                   controllers.GlobalSearch.search(query: String)
GET     /members/api/search/complete/:query              controllers.GlobalSearch.complete(query: String)
# Users

POST    /members/api/users/get                           controllers.Users.get()
GET     /shared/api/users/current                        controllers.Users.getCurrentUser()
GET     /shared/api/users/contacts                      controllers.Users.loadContacts()
GET     /members/api/users/search/:query                 controllers.Users.search(query: String)
GET     /shared/api/users/complete/:query                controllers.Users.complete(query: String)
# Research

POST    /research/api/register                           controllers.research.Researchers.register()
POST    /research/api/login                              controllers.research.Researchers.login()

POST    /research/api/studies                            controllers.research.Studies.create()
GET     /research/api/studies                            controllers.research.Studies.list()
GET     /research/api/studies/:study                     controllers.research.Studies.get(study: String)
PUT     /research/api/studies/:study                     controllers.research.Studies.update(study: String)
GET     /research/api/studies/:study/download            controllers.research.Studies.download(study: String)
GET     /research/api/studies/:study/codes               controllers.research.Studies.listCodes(study: String)
POST    /research/api/studies/:study/codes               controllers.research.Studies.generateCodes(study: String)
GET     /research/api/studies/:study/requiredinfo        controllers.research.Studies.getRequiredInformationSetup(study: String)
POST    /research/api/studies/:study/requiredinfo        controllers.research.Studies.setRequiredInformationSetup(study: String)
POST    /research/api/studies/:study/status/validate     controllers.research.Studies.startValidation(study: String)
POST    /research/api/studies/:study/status/startsearch  controllers.research.Studies.startParticipantSearch(study: String)
POST    /research/api/studies/:study/status/endsearch    controllers.research.Studies.endParticipantSearch(study: String)
POST    /research/api/studies/:study/status/start        controllers.research.Studies.startExecution(study: String)
GET     /research/api/studies/:study/participants        controllers.research.Studies.listParticipants(study: String)
GET     /research/api/studies/:study/participants/:participant controllers.research.Studies.getParticipant(study: String, participant: String)
POST    /research/api/studies/:study/approve             controllers.research.Studies.approveParticipation(study: String)
POST    /research/api/studies/:study/reject              controllers.research.Studies.rejectParticipation(study: String)
POST    /research/api/studies/:study/update              controllers.research.Studies.updateParticipation(study: String)
POST    /research/api/studies/:study/share/:group        controllers.research.Studies.shareWithGroup(study: String, group:String)
POST    /research/api/studies/:study/task/:group         controllers.research.Studies.addTask(study: String, group:String)

POST    /common/api/studies                              controllers.common.Studies.search()
GET     /common/api/groups                               controllers.FormatAPI.listGroups()
GET     /members/api/participation                       controllers.members.Studies.list()
GET     /members/api/participation/:study                controllers.members.Studies.get(study: String)
POST    /members/api/participation/:study/request        controllers.members.Studies.requestParticipation(study: String)
POST    /members/api/participation/:study/no             controllers.members.Studies.noParticipation(study: String)
PATCH   /members/api/participation/:study                controllers.members.Studies.updateParticipation(study: String)
POST    /members/api/studies/entercode                   controllers.members.Studies.enterCode()
GET     /members/api/providers                           controllers.members.HealthProvider.list()
POST    /members/api/providers/search                    controllers.members.HealthProvider.search()
POST    /members/api/consents/confirm                   controllers.members.HealthProvider.confirmConsent()
POST    /members/api/consents/reject                    controllers.members.HealthProvider.rejectConsent()

# Healthcare Provider
POST    /providers/api/register                          controllers.providers.Providers.register()
POST    /providers/api/login                             controllers.providers.Providers.login()
POST    /providers/api/search                            controllers.providers.Providers.search()
POST    /providers/api/list                              controllers.providers.Providers.list()
POST    /providers/api/usevisualization                  controllers.providers.Providers.getVisualizationToken()

GET     /providers/api/member/:member                    controllers.providers.Providers.getMember(member: String)    

# Developers
POST    /developers/api/register                          controllers.Developers.register()
POST    /developers/api/login                             controllers.Developers.login()

# Admins
POST    /admins/api/changeStatus                         controllers.admin.Administration.changeStatus()

# Tasks
POST    /shared/api/tasks/create         controllers.Tasking.add()
POST    /shared/api/tasks/list           controllers.Tasking.list()
POST    /shared/api/tasks/execute/:taskid   controllers.Tasking.execute(taskid: String)

# Apps

GET     /apps/:id/url               controllers.Apps.getUrl(id: String)
GET     /apps/:id/url/preview       controllers.Apps.getPreviewUrl(id: String)
GET     /apps/:id/url/:consent      controllers.Apps.getUrlForConsent(id: String, consent: String)
POST    /apps/:id/access/oauth2     controllers.Plugins.requestAccessTokenOAuth2(id: String)
GET     /apps/:id/request/oauth1    controllers.Plugins.getRequestTokenOAuth1(id: String)
POST    /apps/:id/access/oauth1     controllers.Plugins.requestAccessTokenOAuth1(id: String)
# Visualizations
POST    /plugins                    controllers.Plugins.get()
PUT     /plugins/:id                controllers.Plugins.install(id: String)
DELETE  /plugins/:id                controllers.Plugins.uninstall(id: String)
GET     /plugins/:id/installed      controllers.Plugins.isInstalled(id: String)
GET     /plugins/:id/authorized     controllers.Plugins.isAuthorized(id: String)
GET     /plugins/:id/url            controllers.Plugins.getUrl(id: String)

#Portal
GET     /portal/config              controllers.PortalConfig.getConfig()
POST    /portal/config              controllers.PortalConfig.setConfig()

# JS Routes
GET     /assets/javascripts/routes  controllers.Application.javascriptRoutes()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)

# Genome data converter (special controller for the 23andMe Converter app)
OPTIONS /apps/gdconverter/files     controllers.apps.GenomeDataConverter.checkPreflight()
POST    /apps/gdconverter/files     controllers.apps.GenomeDataConverter.getFiles()
OPTIONS /apps/gdconverter/convert   controllers.apps.GenomeDataConverter.checkPreflight()
POST    /apps/gdconverter/convert   controllers.apps.GenomeDataConverter.convert()

# Apps Public API
OPTIONS /api/apps/create            controllers.AppsAPI.checkPreflight()
POST    /api/apps/create            controllers.AppsAPI.createRecord()
OPTIONS /api/apps/upload            controllers.AppsAPI.checkPreflight()
POST    /api/apps/upload            controllers.AppsAPI.uploadFile()
OPTIONS /api/apps/oauth2            controllers.AppsAPI.checkPreflight()
POST    /api/apps/oauth2            controllers.AppsAPI.oAuth2Call()
OPTIONS /api/apps/oauth1            controllers.AppsAPI.checkPreflight()
POST    /api/apps/oauth1            controllers.AppsAPI.oAuth1Call()
OPTIONS /api/apps/auth              controllers.AppsAPI.checkPreflight()
POST    /api/apps/auth              controllers.AppsAPI.authenticateExternalApp()
OPTIONS /api/apps/records           controllers.AppsAPI.checkPreflight()
POST    /api/apps/records           controllers.AppsAPI.getRecords()
# Visualizations Public API
OPTIONS /api/visualizations/ids     controllers.PluginsAPI.checkPreflight()
POST    /api/visualizations/ids     controllers.PluginsAPI.getIds()
OPTIONS /api/visualizations/records controllers.PluginsAPI.checkPreflight()
POST    /api/visualizations/records controllers.PluginsAPI.getRecords()
OPTIONS /api/visualizations/file    controllers.PluginsAPI.checkPreflight()
POST    /api/visualizations/file    controllers.PluginsAPI.getFile()
OPTIONS /api/visualizations/create  controllers.PluginsAPI.checkPreflight()
POST    /api/visualizations/create  controllers.PluginsAPI.createRecord()
OPTIONS /api/visualizations/getconfig  controllers.PluginsAPI.checkPreflight()
OPTIONS /api/visualizations/setconfig  controllers.PluginsAPI.checkPreflight()
POST    /api/visualizations/setconfig  controllers.PluginsAPI.setConfig()
POST    /api/visualizations/getconfig  controllers.PluginsAPI.getConfig()
OPTIONS /api/visualizations/clone  controllers.PluginsAPI.checkPreflight()
POST    /api/visualizations/clone  controllers.PluginsAPI.cloneAs()

OPTIONS  /*all                                           controllers.Application.checkPreflight(all)